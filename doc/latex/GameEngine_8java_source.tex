\hypertarget{GameEngine_8java_source}{\section{Game\-Engine.\-java}
}

\begin{DoxyCode}
00001 
\hypertarget{GameEngine_8java_source_l00008}{}\hyperlink{classGameEngine}{00008} \textcolor{keyword}{public} \textcolor{keyword}{class }\hyperlink{classGameEngine}{GameEngine}
00009 \{
00013     \textcolor{keyword}{private} \hyperlink{classParser}{Parser} parser;
00014 
00018     \textcolor{keyword}{private} \hyperlink{classRoom}{Room} currentRoom;
00019 
00023     \textcolor{keyword}{private} \hyperlink{classUserInterface}{UserInterface} gui;
00024 
\hypertarget{GameEngine_8java_source_l00028}{}\hyperlink{classGameEngine_a9e8a92f5021a34293060f9aaff4005de}{00028}     \textcolor{keyword}{public} \hyperlink{classGameEngine_a9e8a92f5021a34293060f9aaff4005de}{GameEngine}() \{
00029         parser = \textcolor{keyword}{new} \hyperlink{classParser}{Parser}();
00030         createRooms();
00031     \}
00032 
\hypertarget{GameEngine_8java_source_l00037}{}\hyperlink{classGameEngine_aec901a5b590b3cd204f196165da5dfb6}{00037}     \textcolor{keyword}{public} \textcolor{keywordtype}{void} \hyperlink{classGameEngine_aec901a5b590b3cd204f196165da5dfb6}{setGUI}(\hyperlink{classUserInterface}{UserInterface} userInterface) \{
00038         gui = userInterface;
00039         printWelcome();
00040     \}
00041 
00045     \textcolor{keyword}{private} \textcolor{keywordtype}{void} printWelcome() \{
00046         gui.println(\textcolor{stringliteral}{"Greetings human."});
00047         gui.println(\textcolor{stringliteral}{"I see the assassins have failed. Too bad..."});
00048         gui.println(\textcolor{stringliteral}{"You know what they say: if you want something done, do it yourself."});
00049         gui.println(\textcolor{stringliteral}{"At least I can see that you don't remember anything. At last something that I can take
       advantage of."});
00050         gui.println(\textcolor{stringliteral}{"That was predictable, human minds are weak."});
00051         gui.println(\textcolor{stringliteral}{"\(\backslash\)nBecause you're stupid, I will describe you everything that will be around us."});
00052         gui.println(\textcolor{stringliteral}{"Who know ? Maybe you can turn into something useful. One day. Maybe."});
00053         gui.println(currentRoom.getLongDescription());
00054         gui.showImage(currentRoom.getImageName());
00055     \}
00056 
00060     \textcolor{keyword}{private} \textcolor{keywordtype}{void} createRooms() \{
00061         \textcolor{comment}{// create the rooms}
00062         \hyperlink{classRoom}{Room} outside = \textcolor{keyword}{new} \hyperlink{classRoom}{Room}(\textcolor{stringliteral}{"outside the main entrance of the university"}, \textcolor{stringliteral}{"outside.gif"});
00063         \hyperlink{classRoom}{Room} theatre = \textcolor{keyword}{new} \hyperlink{classRoom}{Room}(\textcolor{stringliteral}{"in a lecture theatre"}, \textcolor{stringliteral}{"castle.gif"});
00064         \hyperlink{classRoom}{Room} pub = \textcolor{keyword}{new} \hyperlink{classRoom}{Room}(\textcolor{stringliteral}{"in the campus pub"}, \textcolor{stringliteral}{"courtyard.gif"});
00065         \hyperlink{classRoom}{Room} lab = \textcolor{keyword}{new} \hyperlink{classRoom}{Room}(\textcolor{stringliteral}{"in a computing lab"}, \textcolor{stringliteral}{"stairs.gif"});
00066         \hyperlink{classRoom}{Room} office = \textcolor{keyword}{new} \hyperlink{classRoom}{Room}(\textcolor{stringliteral}{"the computing admin office"}, \textcolor{stringliteral}{"dungeon.gif"});
00067 
00068         \textcolor{comment}{// initialise room exits}
00069         outside.setExit(\textcolor{stringliteral}{"east"}, theatre);
00070         outside.setExit(\textcolor{stringliteral}{"south"}, lab);
00071         outside.setExit(\textcolor{stringliteral}{"west"}, pub);
00072 
00073         theatre.setExit(\textcolor{stringliteral}{"west"}, outside);
00074 
00075         pub.setExit(\textcolor{stringliteral}{"east"}, outside);
00076 
00077         lab.setExit(\textcolor{stringliteral}{"north"}, outside);
00078         lab.setExit(\textcolor{stringliteral}{"east"}, office);
00079 
00080         office.setExit(\textcolor{stringliteral}{"west"}, lab);
00081 
00082         currentRoom = outside;  \textcolor{comment}{// start game outside}
00083     \}
00084 
\hypertarget{GameEngine_8java_source_l00089}{}\hyperlink{classGameEngine_ad7133885f313fa99bca3bb7cb8272f64}{00089}     \textcolor{keyword}{public} \textcolor{keywordtype}{void} \hyperlink{classGameEngine_ad7133885f313fa99bca3bb7cb8272f64}{processCommand}(String commandLine) \{
00090         gui.println(commandLine);
00091         Command command = parser.getCommand(commandLine);
00092 
00093         \textcolor{keywordflow}{if}(command.isUnknown()) \{
00094             gui.println(\textcolor{stringliteral}{"I don't know what you mean..."});
00095             \textcolor{keywordflow}{return};
00096         \}
00097 
00098         String commandWord = command.getCommandWord();
00099         \textcolor{keywordflow}{if} (commandWord.equals(\textcolor{stringliteral}{"help"}))
00100             printHelp();
00101         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commandWord.equals(\textcolor{stringliteral}{"go"}))
00102             goRoom(command);
00103         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (commandWord.equals(\textcolor{stringliteral}{"quit"})) \{
00104             \textcolor{keywordflow}{if}(command.hasSecondWord())
00105                 gui.\hyperlink{classUserInterface_a79f606b4b1f5d1523e50eea00039ed94}{println}(\textcolor{stringliteral}{"Quit what?"});
00106             \textcolor{keywordflow}{else}
00107                 endGame();
00108         \}
00109     \}
00110 
00114     \textcolor{keyword}{private} \textcolor{keywordtype}{void} printHelp() \{
00115         gui.println(\textcolor{stringliteral}{"Help ? Who needs help ? Only the weak ones."})
00116             gui.\hyperlink{classUserInterface_a79f606b4b1f5d1523e50eea00039ed94}{println}(\textcolor{stringliteral}{"Your command words are: "} + parser.\hyperlink{classParser_ae99d8549c08045804cc52576d7b4b453}{showCommands}());
00117         gui.println(\textcolor{stringliteral}{"That will be all."});
00118     \}
00119 
00125     \textcolor{keyword}{private} \textcolor{keywordtype}{void} goRoom(Command command) \{
00126         \textcolor{keywordflow}{if}(!command.hasSecondWord()) \{
00127             \textcolor{comment}{// if there is no second word, we don't know where to go...}
00128             gui.println(\textcolor{stringliteral}{"Go where?"});
00129             \textcolor{keywordflow}{return};
00130         \}
00131 
00132         String direction = command.getSecondWord();
00133 
00134         \textcolor{comment}{// Try to leave current room.}
00135         \hyperlink{classRoom}{Room} nextRoom = currentRoom.getExit(direction);
00136 
00137         \textcolor{keywordflow}{if} (nextRoom == null)
00138             gui.println(\textcolor{stringliteral}{"There is no door!"});
00139         \textcolor{keywordflow}{else} \{
00140             currentRoom = nextRoom;
00141             gui.println(currentRoom.getLongDescription());
00142             \textcolor{keywordflow}{if}(currentRoom.\hyperlink{classRoom_a8177668df4d8be718812934673c42649}{getImageName}() != null)
00143                 gui.\hyperlink{classUserInterface_ab793a0f12878c698ba3e1720a9f86f3b}{showImage}(currentRoom.\hyperlink{classRoom_a8177668df4d8be718812934673c42649}{getImageName}());
00144         \}
00145     \}
00146 
00150     \textcolor{keyword}{private} \textcolor{keywordtype}{void} endGame() \{
00151         gui.println(\textcolor{stringliteral}{"Thank you for playing.  Good bye."});
00152         gui.enable(\textcolor{keyword}{false});
00153     \}
00154 
00155 \}
\end{DoxyCode}
